<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MoonnyMathics - Test</title>
</head>

<body>

  <script src="//cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js"
    integrity="sha256-yr4fRk/GU1ehYJPAs8P4JlTgu0Hdsp4ZKrx8bDEDC3I=" crossorigin="anonymous">
    </script>

  <script type="text/javascript" charset="utf-8">
    // var m = new io.Manager('/api', {
    //   autoConnect: false
    // });

    // m.connect((data) => {
    //   console.log(data);
    //   console.log('manager callback');
    // })

    var socket = io('/api', {
      autoConnect: false
    });

    socket.on('connect_failed', function () {
      console.log("Sorry, there seems to be an issue with the connection!");
    })

    socket.send('tobi', (data) => {
      console.log(data); // data will be 'woot'
    });

    socket.on('connect', data => {
      console.log('connected!');
      console.log(data);
      // socket.emit('room bla-bla', 'in room');
      // socket.emit('join', { "room": "room111", "username": "HaHa" });
      // io.disconnect();
    });

    socket.connect()

    // socket.on('disconnect', function () {
    //   console.log('I\'m disconnected!');
    // });

    socket.on('message', message => {
      console.log('message: ' + message);
    })

    socket.on('lobby', message => {
      console.log('lobby message: ' + message);
    })

    // socket.on('echo', (msg) => {
    //   console.log('echo: ' + msg);
    // });
  </script>
  <!-- <script>
    // let ws = new WebSocket("ws://127.0.0.1:5000/")
    const socket = new WebSocket('ws://localhost:5000');

    socket.onopen(() => {
      socket.send('Hello!');
    });

    socket.onmessage(data => {
      console.log(data);
    });
  </script> -->
</body>

</html>